  
  
  
  
<img src="https://github.com/farique1/diffusion-browser/blob/main/Images/Logo.png" alt="Diffusion Browser" width="128" height="111">  
  
# Diffusion Browser  
**v2.3**  
An easy way to view images and their embedded metadata generated by **[AUTOMATIC1111 Stable Diffusion web UI](https://github.com/AUTOMATIC1111/stable-diffusion-webui)**.  
  
> Many thanks to [RandomLegend](https://github.com/RandomLegend) not only for extensive testing, bug reporting and great feature ideas but also for actually contributing most of the Linux code and stuff.  
  
>**Diffusion Browser** uses the **[Pillow](https://pillow.readthedocs.io/en/stable/)** module.  
  
## Main Interface  
![# Interface](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_main_interface.png)  
(From top left, clockwise):  
  
**1** *Number of images found.*  
  
**2** *Current path.*  
Looking for images in this path and its subfolders.  
Click to copy the current path.  
  
**3** *Refresh button.*  
Refresh new/deleted images in the current path.  
New images will be sorted according to their timestamps.  
  
**4** *New path button.*  
Change the current path.  
Will not override the default path in the config.  
  
**5** *Show folder button.*  
Open the file explorer pointing to the current folder.  
  
**6** *Config button.*  
Change Diffusion Browser's settings.  
More below.  
  
**7** *Image preview.*  
Display the currently selected image.  
Click to open a window with the image in full size  
Shift+click or right click to open the image on the default system viewer.  
  
**8** *Information viewer.*  
Display the embedded information along with some extra content.  
Use the mouse wheel to scroll.  
Selected text will be automatically copied to the clipboard.  
Right click to copy all content.  
Triple click select/copy a single parameter.  
The lines are reordered for a better presentation.  
The order can be changed in `parameters.txt`.  
If no compatible parameter is found, the raw information (if any) will be displayed under `embedded info:`.  
Parameters for images generated on Automatic1111 Extas have added numbers to keep their order.  
More below.  
  
**9** *Save info button.*  
Save the information of the info window to a text file with the same name as the image on the same folder.  
Right click to chose a different name.  
  
**10** *Show in folder button.*  
Open the file explorer pointing to the current image.  
  
**11** *Overlay button*  
Overlay the parameter chosen on the parameter box to the grid images.  
`all parameters` or an empty box will reset the images.  
Right click or shift+click will clear the overlay.  
  
**12** *Sort button*  
Sort the grid images according to the parameter chosen on the parameter box.  
Click again to reverse the sort.  
`all parameters` or an empty box will sort by timestamp.  
Right click or shift+click will sort by timestamp.  
  
**13** *Parameter pull down box*  
A pull down box containing all the parameters available.  
Used to narrow the search and expose matches and to select the sort or overlay information.  
`all parameters` or an empty box will reset the functions.  
  
**14** *Search entry box*  
Enter the search string here.  
Return will show only the images matching the search.  
Shift+return will expose the search match.  
Control+return will clear the search  
Control+shift+return will clear the expose.  
  
**15** *Search button*  
Will search the images based on the search box entry.  
Shift+click/return/space will clear the search without erasing the search box.  
Control+click/return/space will invert the search match.  
  
**16** *Expose button*  
Will expose the images based on the search box entry.  
All non-matching images will be grayed out.  
Shift+click/return/space will clear the expose without erasing the search box.  
Control+click/return/space will invert the search match.  
  
**17** *Browser grid*  
Show all images fond on the current path and subfolders.  
Click to select an image.  
Once clicked use the arrow keys to navigate the grid.  
Double click/return/space opens the full version on the internal viewer.  
Shift+double click/return/space opens the full version on the default system viewer.  
Right click opens a context menu with functions for this image instead of the selected one.  
Clicking the image name on the context menu will copy its path.  
  
> **Some more keyboard shortcuts**:  
**Control+c**: Copy the selected image information to the clipboard.  
**Control+f**: Shows the current image on its folder.  
**Control+p**: Shows the current path.  
**Control+i**: Save the current info box content to a text file with the image name.  
**Control+shift+i**: Save the current info box content to a text file asking for a name.  
**Control+s**: Copy the selected image to another folder.  
**Control+o**: Sort the images by the chosen parameter.  
**Control+shift+o**: Sort the images by timestamp.  
**Control+i**: Overlays the selected parameter on the grid images.  
**Control+shift+i**: Clears the overlayed parameters.  
**Control+r**: Refresh new/deleted images in the current path.  
**Esc**: Cancel the progress when loading images. The images loaded so far are kept. The loading can be resumed with the refresh button.  
  
## Full sized image view.  
![# Full image](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_image.png)  
  
The window can be resized and will show the image seed and file name.  
Esc closes the window if selected.  
  
## Configuration  
![# Configuration](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_config.png)  
  
**The following can be configured:**  
The number of grid columns.  
The number of grid rows.  
Each grid image size.  
The preview image size.  
The height of the buttons (to compensate for font sizes).  
The font name.  
The font size.  
The font weight.  
The Background color.  
The Main color.  
The 1st accent color.  
The 2nd accent color.  
The alert color.  
The default path.  
>*The get font buttons all take to the same font requester.*  
*The current path will be passed as the default path.*  
*The configuration will be saved on an `.ini` file.*  
*If the interface exceeds the screen size a warning will be given.*  
  
## The information viewer.  
The information is gathered from the embedded text in the image files.  
The information window reorders the parameters on a more intuitive way and display further information:  
```yaml  
prompt: infinite jest book cover  
seed: 3547671229  
sampler: Euler a  
steps: 20  
cfg scale: 7  
size: 512x512  
model hash: 7460a6fa  
  
source: automatic1111  
real_size: 512 x 512  
format: png  
created: 05-10-2022 15:32:53  
path: <PATH TO>/<IMAGE>.png  
```  
The parameters are listed on the `parameters.txt` file. This list is responsible for the order and highlight of the parameters in the information window.  
A message will be shown if new parameters are discovered on an image. You can have Diffusion Browser  automatically add these new parameters to `parameters.txt`. They will also be copied to the clipboard to be added manually. If added automatically they will be located before the empty separator, change their order according to your liking.  
Automatic1111 Extras parameters are added by a number to keep their order. These parameters must also be numbered on `parameters.txt`.  
The current parameters are:  
```  
embedded info  
prompt  
negative prompt  
seed  
sampler  
sampler_name  
steps  
ddim_steps  
ddim_eta  
cfg scale  
cfg_scale  
cfgscale  
width  
height  
size  
initimg  
strength  
denoising strength  
denoising_strength  
first pass size  
mask blur  
n_iter  
iterations  
batch_size  
batch size  
batch pos  
grid  
batch  
fit  
progress_images  
toggles  
resize_mode  
gfpgan_strength  
upscale_level  
upscale_strength  
target  
model  
model hash  
clip skip  
model 1  
upscale 1  
visibility 1  
model 2  
upscale 2  
visibility 2  
  
source  
real_size  
format  
created  
path  
```  
If no compatible parameters are found, Diffusion Browser will show the raw embedded information under `embedded info:`.  
  
## Changes  
v2.3  
- Sort by parameters  
- Show parameter overlay on the grid  
- Right click image preview to open in system default viewer  
- Page up and page down scroll grid by page  
- Right click on the info box copy all  its information  
- New context menu items  
- New keyboard shortcuts  
- Save image parameters information to a file  
- Show parameters on Automatic1111 Extras modules ordered  
- Control+button invert search and expose matches  
- Right click+button clears expose/search/overlay/sort  
- Show raw image information if no compatible parameter found  
- Better information parsing  
- Better internal data representations  
- Better config handling  
- Several config bug fixes  
- Alert color if config entry is invalid  
- Small GUI fixes  
  
v2.2  
- ESC cancels image loading  
- Shift-clicking the preview image opens it in the default system viewer  
- Shift+double click/return/space on a grid image opens it on the default system viewer  
- Right click grid images opens a context menu with some functions on that image  
- Ctrl+c copy the selected grid image to a folder  
- Show folder now selects the folder  
- Show in folder now selects the image  
- Show folder, show in folder and view in system now working on Linux and Mac OS  
- Mouse wheel now working on Linux and Mac OS  
- Automatically add new parameters to `parameters.txt`  
- Better embedded information parsing  
- Catch errors loading bad image files  
- Main widow resizable to avoid problem with window managers  
- Fixed image viewer window aspect ratio bug  
  
v2.1  
- Small interface improvements  
- Better arrow keys navigation  
- Selected image now highlighted on the grid  
- Return/space/double click a grid image opens the full version  
- Esc closes the full image window if selected  
- Search and expose images  
- Do not show grid progress while loading anymore but it's faster  
- Refresh (!) now only updates the new/deleted images.  
- Better configuration handling  
- Resizable font requester and configuration windows  
- Bigger font requester  
- Font preview while browsing  
- The preview text on the font requester can be changed  
- Arrows to change the size on the font requester  
  
## TODO  
  
- Look for the accompanying text file if no embedded information found  
- Bottom bar with help text when hovering over widgets  
- Size arrows on the numeric config fields  
- Butons for font weight on the main config window  
- Multi select images to delete/copy/move  
- Pull down to browse sub/different folders  
- Multi folder capability  
- Cache the images so the program opens faster. Give the option to cache or not  
  
## Linux stuff  
  
Installation (optional):  
- This will copy the program to a folder in the home directory and will put a desktop shortcut in the systems directory so every start menu and app launcher will find Diffusion Browser.  
Leave `Diffusion-Browser.desktop` and `linux-install.sh` in the main Diffusion Browser folder and run `linux-install.sh`.  
  
- To uninstall type:  
`rm -r $HOME/Diffusion-Browser`  
`rm ~/.local/share/applications/Diffusion-Browser.desktop`  
  
  
For KDE users  if main program window is buggy:  
- Press ALT + F3  
- Select "More Actions"  
- Select "Configure Special Windoww Settings"  
- Add Property  
- Size  
- Enter desired Size  
  
## Acknowledgments  
  
**Diffusion Browser** is offered as is, with no guaranties whatsoever, use at your own discretion.  
Enjoy and send feedback.  
Thanks.  
