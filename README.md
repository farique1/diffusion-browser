  
  
  
<img src="https://github.com/farique1/diffusion-browser/blob/main/Images/Logo.png" alt="Diffusion Browser" width="128" height="111">  
  
# Diffusion Browser  
**v2.2**  
An easy way to view images and their embedded metadata generated by **[AUTOMATIC1111 Stable Diffusion web UI](https://github.com/AUTOMATIC1111/stable-diffusion-webui)**.  
  
> Many thanks to [RandomLegend](https://github.com/RandomLegend) not only for extensive testing, bug reporting and great feature ideas but also for actually contributing most of the Linux code and stuff.  
  
>**Diffusion Browser** uses the **[Pillow](https://pillow.readthedocs.io/en/stable/)** module.  
  
## Main Interface  
![# Interface](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_main_interface.png)  
(From top left, clockwise):  
  
**1** *Number of images found.*  
  
**2** *Current path.*  
And subfolders.  
Click to copy the current path.  
  
**3** *Refresh button.*  
Refresh new/deleted images in the current path.  
New images will appear at the top of the grid regardless of the date.  
  
**4** *Path button.*  
Change the current path.  
Will not override the default path in the settings.  
  
**5** *Show folder button.*  
Open the file explorer pointing to the current folder.  
  
**6** *Config button.*  
Change Diffusion Browser's settings.  
More below.  
  
**7** *Image preview.*  
Display the currently selected image.  
Click to open a window with the image in full size  
Shift+click to open the image on the default system viewer.  
  
**8** *Information viewer.*  
Display the embedded information along with some extra content.  
Use the mouse wheel to scroll.  
Selected text will be automatically copied to the clipboard.  
The lines are reordered for a better presentation.  
The order can be changed in `parameters.txt`.  
More below.  
  
**9** *Open in folder button.*  
Open the file explorer pointing to the current image.  
  
**10** *Search parameters*  
The search can be narrowed to only a single parameter by choosing from this drop box.  
`All parameters` or an empty box will search the whole text.  
  
**11** *Search box*  
Enter the search string here.  
Return will show only the images matching the search.  
Shift+return will expose the search match.  
  
**12** *Search button*  
Will search the images based on the search box.  
Shift+click/return/space will clear the search without erasing the search box.  
  
**13** *Expose button*  
Will expose the images based on the search box.  
All non-matching images will be grayed out.  
Shift+click/return/space will clear the expose without erasing the search box.  
  
**14** *Browser grid*  
Show all images fond on the current path and subfolders.  
Click to select an image.  
Once clicked use the arrow keys to navigate the grid.  
Double click/return/space opens the full version on the internal viewer.  
Shift+double click/return/space opens the full version on the default system viewer.  
Right click opens a context menu dealing with the right clicked image.  
Ctrl+c copy the selected image to a folder.  
  
> When loading images, the progress window can be closed at any time to stop the progress keeping all images loaded so far. Pressing ESC also closes the progress.  
  
## Full sized image view.  
![# Full image](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_image.png)  
  
The window can be resized and will show the image seed and file name.  
Esc closes the window if selected.  
  
## Configuration  
![# Configuration](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_config.png)  
  
**The following can be configured:**  
The number of grid columns.  
The number of grid rows.  
Each grid image size.  
The preview image size.  
The height of the buttons (to compensate for font sizes).  
The font name.  
The font size.  
The font weight.  
The Background color.  
The Main color.  
The 1st accent color.  
The 2nd accent color.  
The alert color.  
The default path.  
>*The get font buttons all take to the same font requester.*  
*The current path will be passed as the default path.*  
*The configuration will be saved on an `.ini` file.*  
*If the interface exceeds the screen size a warning will be given.*  
  
## The information viewer.  
The information is gathered from the embedded text in the image files.  
The information window reorders the parameters on a more intuitive way and display further information:  
```yaml  
prompt: infinite jest book cover  
seed: 3547671229  
sampler: Euler a  
steps: 20  
cfg scale: 7  
size: 512x512  
model hash: 7460a6fa  
  
source: automatic1111  
real_size: 512 x 512  
format: png  
created: 05-10-2022 15:32:53  
path: <PATH TO>/<IMAGE>.png  
```  
  
The parameters are listed on the `parameters.txt` file. This list is responsible for the order and highlight of the parameters in the information window.  
A message will be shown if new parameters are discovered on an image. You can have Diffusion Browser  automatically add these new parameters to `parameters.txt`. They will also be copied to the clipboard to be added manually. If added automatically they will be located before the empty separator, change their order according to your liking.  
The current parameters are:  
```  
embedded info  
prompt  
negative prompt  
seed  
sampler  
sampler_name  
steps  
ddim_steps  
ddim_eta  
cfg scale  
cfg_scale  
cfgscale  
width  
height  
size  
initimg  
strength  
denoising strength  
denoising_strength  
first pass size  
mask blur  
n_iter  
iterations  
batch_size  
batch size  
batch pos  
grid  
batch  
fit  
progress_images  
toggles  
upscale  
model  
visibility  
resize_mode  
gfpgan_strength  
upscale_level  
upscale_strength  
target  
model hash  
clip skip  
  
source  
real_size  
format  
created  
path  
```  
  
## Changes  
v2.2  
- ESC cancels image loading  
- Shift-clicking the preview image opens it in the default system viewer  
- Shift+double click/return/space on a grid image opens it on the default system viewer  
- Right click grid images opens a context menu with some functions on that image  
- Ctrl+c copy the selected grid image to a folder  
- Show folder now selects the folder  
- Show in folder now selects the image  
- Show folder, show in folder and view in system now working on Linux and Mac OS  
- Mouse wheel now working on Linux and Mac OS  
- Automatically add new parameters to `parameters.txt`  
- Better embedded information parsing  
- Catch errors loading bad image files  
- Main widow resizable to avoid problem with window managers  
- Fixed image viewer window aspect ratio bug  
  
v2.1  
- Small interface improvements  
- Better arrow keys navigation  
- Selected image now highlighted on the grid  
- Return/space/double click a grid image opens the full version  
- Esc closes the full image window if selected  
- Search and expose images  
- Do not show grid progress while loading anymore but it's faster  
- Refresh (!) now only updates the new/deleted images.  
- Better configuration handling  
- Resizable font requester and configuration windows  
- Bigger font requester  
- Font preview while browsing  
- The preview text on the font requester can be changed  
- Arrows to change the size on the font requester  
  
## TODO  
  
- Look for the accompanying text file if no embedded information found  
- Multi folder capability  
- Sort by parameters  
- Info overlay on the grid images: sampler, steps, cfg scale, etc  
- Multi function combo box: search/sort/show overlay  
- Implement page up and page down  
- Multi select images to delete/copy/move  
- Pull down to browse sub/different folders  
- Bottom bar with help text when hovering over widgets  
- Cache the images so the program opens faster. Give the option to cache or not  
  
## Linux stuff  
  
Installation (optional):  
- This will copy the program to a folder in the home directory and will put a desktop shortcut in the systems directory so every start menu and app launcher will find Diffusion Browser.  
Leave `Diffusion-Browser.desktop` and `linux-install.sh` in the main Diffusion Browser folder and run `linux-install.sh`.  
  
- To uninstall type:  
`rm -r $HOME/Diffusion-Browser`  
`rm ~/.local/share/applications/Diffusion-Browser.desktop`  
  
  
For KDE users  if main program window is buggy:  
- Press ALT + F3  
- Select "More Actions"  
- Select "Configure Special Windoww Settings"  
- Add Property  
- Size  
- Enter desired Size  
  
## Acknowledgments  
  
**Diffusion Browser** is offered as is, with no guaranties whatsoever, use at your own discretion.  
Enjoy and send feedback.  
Thanks.  
