
<img src="https://github.com/farique1/diffusion-browser/blob/main/Images/Logo.png" alt="Diffusion Browser" width="128" height="111">  
  
# Diffusion Browser  
**v2.0**  
An easy way to view images and embedded PNG metadata generated by **[AUTOMATIC1111 Stable Diffusion web UI](https://github.com/AUTOMATIC1111/stable-diffusion-webui)**.    
  
> Fixed `Negative Prompt` error and added support for JPEG embedded parameters.  
  
Also works with **[InvokeAI](https://github.com/invoke-ai/InvokeAI)** and **[sd-webui](https://github.com/sd-webui/stable-diffusion-webui)** PNGs by embedding the information with the provided converters and potentially any PNG with embedded information.  
  
>The converters can be found on the `tools` folder.  
>**Diffusion Browser** uses the **[Pillow](https://pillow.readthedocs.io/en/stable/)** module.  
The older version, working with **sd-webui**'s yaml files is in the `for_sd-webui` folder.  
  
## Main Interface  
![# Interface](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_main_interface.png)  
(From top left, clockwise):  
  
**1** *Number of images found.*  
  
**2** *Current path.*  
And subfolders.  
Click to copy the current path.  
  
**3** *Refresh button.*  
Refresh the current path.  
  
**4** *Path button.*  
Change the current path.  
  
**5** *Explorer path button.*  
Open the file explorer in the current path.  
  
**6** *Config button.*  
Change Diffusion Browser's settings.  
More below.  
  
**7** *Image preview.*  
Display the currently selected image.  
Click to open a full version of the image.  
  
**8** *Information viewer.*  
Display the PNG embedded information along with some extra content.  
Use the mouse wheel to scroll.  
Selected text will be automatically copied to the clipboard.  
The lines are reordered for a better presentation.  
The order and highlights can be changed on the code.  
More below.  
  
**9** *Explorer image button.*  
Open the file explorer in the selected image path.  
  
**10** *Browser grid*  
Show all images fond on the current path and subfolders.  
Click to select an image.  
Once clicked use the arrow keys to navigate the grid.  
  
## Full sized image view.  
![# Full image](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_image.png)  
  
The window can be resized and will show the image seed and file name.  
  
## Configuration  
![# Configuration](https://github.com/farique1/diffusion-browser/blob/main/Images/DiffusionBrowser_config.png)  
  
**The following can be configured:**  
The number of grid columns.  
The number of grid rows.  
Each grid image size.  
The preview image size.  
The height of the buttons (to compensate for font sizes).  
The font name.  
The font size.  
The font weight.  
The Background color.  
The Main color.  
The 1st accent color.  
The 2nd accent color.  
The alert color.  
The default path.  
>*The get font buttons all take to the same font requester.*  
*The current path will be passed as the default path.*  
*The configuration will be saved on an `.ini` file.*  
*If the interface exceeds the screen size a warning will be given.*  
  
## The information viewer.  
The information is gathered from the embedded text chunk on the PNG file.  
The information window reorders the tags on a more intuitive way and display further information:  
```yaml  
prompt: infinite jest book cover
seed: 3547671229
sampler: Euler a
steps: 20
cfg scale: 7
size: 512x512
model hash: 7460a6fa

source: automatic1111
real_size: 512 x 512
format: png
created: 05-10-2022 15:32:53
path: <PATH TO>/<IMAGE>.png
```  

A list is provided with tags that should be highlighted. The list also works as a sorting mechanism to better organize the information. Further tags can be added to conform with new information or other sources.  
Also a `ValueError` may be fixed by including the new tag here.  
```Python  
TEXT_TAGS = ['embedded info',
             'prompt',
             'negative prompt',
             'seed',
             'sampler',
             'sampler_name',
             'steps',
             'ddim_steps',
             'ddim_eta',
             'cfg scale',
             'cfg_scale',
             'cfgscale',
             'width',
             'height',
             'size',
             'initimg',
             'strength',
             'denoising strength',
             'denoising_strength',
             'first pass size',
             'mask blur',
             'n_iter',
             'iterations',
             'batch_size',
             'batch size',
             'batch pos',
             'grid',
             'batch',
             'fit',
             'progress_images',
             'toggles',
             'upscale',
             'model',
             'visibility',
             'resize_mode',
             'gfpgan_strength',
             'upscale_level',
             'upscale_strength',
             'target',
             'model hash',
             ' ',
             'source',
             'real_size',
             'format',
             'created',
             'path']
```  
  
## Acknowledgments  
  
**Diffusion Browser** is offered as is, with no guaranties whatsoever, use at your own discretion.  
Enjoy and send feedback.  
Thanks.  
